define("models/GeoAPI",[],function(){var o=Backbone.Model.extend({api:null,intervalID:null,intervalDelay:1e4,defaults:{position:{},positionStack:[]},initialize:function(){this.Connect(),this.listenTo(window.proxy,"navigator.geolocation:received",function(o){this.set({position:o},{silent:!0});var e=this.get("positionStack"),n=this.get("position");e.push(n),this.set({positionStack:e},{silent:!0}),this.trigger("change")}),this.listenTo(window.proxy,"GeoAPI:GetPosition",function(){this.GetPosition()})},Connect:function(){console.log("geoApi:connect:start"),navigator.geolocation?this.api=navigator.geolocation:console.error("Geolocation is not supported by this browser."),this.intervalID=setInterval(function(){window.proxy.trigger("GeoAPI:GetPosition")},this.intervalDelay),console.log("geoApi:connect:end")},GetPosition:function(){console.log("getPosition:start"),this.api.getCurrentPosition(this._GetPositionCallback),console.log("getPosition:end")},_GetPositionCallback:function(o){console.log("Position: ",o),window.proxy.trigger("navigator.geolocation:received",o)}});return o});